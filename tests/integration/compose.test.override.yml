services:
  collector:
    build:
      context: ./collector
      dockerfile: Dockerfile
    image: lux-test-collector:local
    volumes:
      - ./tests/integration/config:/test-config:ro
    environment:
      COLLECTOR_FILTER_CONFIG: /test-config/audit_filtering.yaml
      COLLECTOR_EBPF_FILTER_CONFIG: /test-config/ebpf_filtering.yaml

  agent:
    build:
      context: ./agent
      dockerfile: Dockerfile
    image: lux-test-agent:local

  harness:
    build:
      context: ./harness
      dockerfile: Dockerfile
    image: lux-test-harness:local
