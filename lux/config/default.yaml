version: 2

paths:
  # `lux config init`/`lux setup` rewrite these using host-OS defaults.
  trusted_root: /var/lib/lux
  log_root: /var/lib/lux/logs
  workspace_root: ~/

shims:
  bin_dir: /var/lib/lux/bin

release:
  tag: ""

docker:
  project_name: lux

harness:
  api_host: 127.0.0.1
  api_port: 8081
  api_token: "TEMP_STR_TO_CHANGE"

collector:
  auto_start: true
  idle_timeout_min: 10080
  rotate_every_min: 1440

runtime_control_plane:
  socket_path: ""

providers:
  codex:
    auth_mode: api_key
    mount_host_state_in_api_mode: false
    commands:
      tui: "codex -C /work -s danger-full-access"
      run_template: "codex -C /work -s danger-full-access exec {prompt}"
    auth:
      api_key:
        secrets_file: /var/lib/lux/secrets/codex.env
        env_key: OPENAI_API_KEY
      host_state:
        paths:
          - ~/.codex/auth.json
          - ~/.codex/skills
    ownership:
      root_comm:
        - bash
        - sh
        - setsid
        - timeout
        - codex
  claude:
    auth_mode: host_state
    mount_host_state_in_api_mode: false
    commands:
      tui: "claude"
      run_template: "claude -p {prompt}"
    auth:
      api_key:
        secrets_file: /var/lib/lux/secrets/claude.env
        env_key: ANTHROPIC_API_KEY
      host_state:
        paths:
          - ~/.claude.json
          - ~/.claude
          - ~/.config/claude-code/auth.json
    ownership:
      root_comm:
        - bash
        - sh
        - setsid
        - timeout
        - claude
