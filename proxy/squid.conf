http_port 3128

# Accept any Basic auth username/password so we can log per-session/job users.
auth_param basic program /usr/local/bin/proxy_auth_helper.py
auth_param basic realm Agent Harness Proxy
auth_param basic credentialsttl 2 hours
acl authed proxy_auth REQUIRED

# Log to a host-mounted sink for JSONL parsing.
access_log stdio:/logs/squid_access.log
cache_log /dev/null
cache_store_log none
logfile_rotate 0

# Disable caching (proxy as pass-through).
cache deny all
cache_mem 0 MB
maximum_object_size 0 KB

coredump_dir /var/spool/squid

acl all src 0.0.0.0/0
http_access allow authed
http_access deny all
